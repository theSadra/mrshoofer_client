/* Custom Variable Font - IRAN Sans X */
@font-face {
  font-family: 'IRAN Sans X';
  src: url('/fonts/IRANSansXV.woff2') format('woff2-variations');
  font-weight: 100 900; /* Variable font weight range */
  font-style: normal;
  font-display: swap;
  unicode-range: U+0600-06FF, U+200C-200E, U+2010-2011, U+204F, U+2E41, U+FB50-FDFF, U+FE80-FEFC, U+0020-007E;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --font-sans: 'IRAN Sans X', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'IRAN Sans X', 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', 'Courier New', monospace;
  /* Force localized Persian digit glyphs wherever possible */
  font-feature-settings: "locl" 1, "ss02" 1;
  font-variant-numeric: proportional-nums;
  font-language-override: "FAR";
}

html[lang="fa"] {
  font-language-override: "FAR";
}

html[lang="fa"] body,
html[lang="fa"] body *:not([data-digit-latin]),
html[lang="fa"] body *:not([data-digit-latin])::before,
html[lang="fa"] body *:not([data-digit-latin])::after {
  font-feature-settings: "locl" 1, "ss02" 1;
  font-variant-numeric: proportional-nums;
}

/* Mobile Keyboard & Viewport Fixes */
html {
  /* Prevent zoom on input focus */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  /* Prevent rubber band scrolling */
  overscroll-behavior: none;
  /* Smooth scrolling */
  scroll-behavior: smooth;
  /* Fixed positioning fix for iOS */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

body {
  /* Prevent zoom and rubber band scrolling */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  overscroll-behavior: none;
  /* Smooth scrolling */
  scroll-behavior: smooth;
  /* Fix for iOS Safari address bar */
  min-height: 100vh;
  min-height: -webkit-fill-available;
}

/* Fix for mobile keyboard issues */
input,
textarea,
select {
  /* Prevent zoom on input focus */
  font-size: 16px !important;
  /* Fix iOS styling */
  -webkit-appearance: none;
  appearance: none;
  /* Disable zoom on double tap */
  touch-action: manipulation;
}

/* Mobile Modal Fixes */
@media (max-width: 640px) {
  /* Full-screen modal fix for mobile keyboards */
  [data-slot="wrapper"]:has([data-testid="modal"]) {
    height: 100dvh !important;
    height: calc(var(--vh, 1vh) * 100) !important;
  }
  
  [data-slot="base"]:has([data-testid="modal"]) {
    height: 100dvh !important;
    height: calc(var(--vh, 1vh) * 100) !important;
    max-height: none !important;
  }
  
  /* Ensure modal content takes full height */
  .modal-content-full {
    height: 100dvh !important;
    height: calc(var(--vh, 1vh) * 100) !important;
    display: flex !important;
    flex-direction: column !important;
  }
  
  .modal-body-full {
    flex: 1 !important;
    overflow-y: auto !important;
    max-height: none !important;
  }
}

/* Mobile-specific fixes */
@media screen and (max-width: 768px) {

  /* Fix for mobile keyboard pushing content up */
  .mobile-keyboard-fix {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    position: relative;
  }

  /* Prevent body scroll when drawer is open */
  body.drawer-open {
    overflow: hidden !important;
  }

  /* Handle mobile keyboard active state */
  body.mobile-keyboard-active {
    position: fixed !important;
    width: 100% !important;
  }

  /* Keyboard safe area */
  .keyboard-safe-area {
    padding-bottom: env(keyboard-inset-height, 0px);
  }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {

  /* Fix for iOS Safari bottom safe area */
  .ios-safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Fix for iOS Safari viewport height */
  .ios-vh-fix {
    height: -webkit-fill-available;
  }

  /* iOS input focus fix */
  input:focus,
  textarea:focus {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

.map-container {
  height: 100%;
  width: 100%;
}

body.modal-open {
  overflow: hidden !important;
  touch-action: none;
}

html,
body {
  min-height: 100vh;
  min-height: -webkit-fill-available;
  background-color: #fcfcfc;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 56 28' width='56' height='28'%3E%3Cpath fill='%23939393' fill-opacity='0.05' d='M56 26v2h-7.75c2.3-1.27 4.94-2 7.75-2zm-26 2a2 2 0 1 0-4 0h-4.09A25.98 25.98 0 0 0 0 16v-2c.67 0 1.34.02 2 .07V14a2 2 0 0 0-2-2v-2a4 4 0 0 1 3.98 3.6 28.09 28.09 0 0 1 2.8-3.86A8 8 0 0 0 0 6V4a9.99 9.99 0 0 1 8.17 4.23c.94-.95 1.96-1.83 3.03-2.63A13.98 13.98 0 0 0 0 0h7.75c2 1.1 3.73 2.63 5.1 4.45 1.12-.72 2.3-1.37 3.53-1.93A20.1 20.1 0 0 0 14.28 0h2.7c.45.56.88 1.14 1.29 1.74 1.3-.48 2.63-.87 4-1.15-.11-.2-.23-.4-.36-.59H26v.07a28.4 28.4 0 0 1 4 0V0h4.09l-.37.59c1.38.28 2.72.67 4.01 1.15.4-.6.84-1.18 1.3-1.74h2.69a20.1 20.1 0 0 0-2.1 2.52c1.23.56 2.41 1.2 3.54 1.93A16.08 16.08 0 0 1 48.25 0H56c-4.58 0-8.65 2.2-11.2 5.6 1.07.8 2.09 1.68 3.03 2.63A9.99 9.99 0 0 1 56 4v2a8 8 0 0 0-6.77 3.74c1.03 1.2 1.97 2.5 2.79 3.86A4 4 0 0 1 56 10v2a2 2 0 0 0-2 2.07 28.4 28.4 0 0 1 2-.07v2c-9.2 0-17.3 4.78-21.91 12H30zM7.75 28H0v-2c2.81 0 5.46.73 7.75 2zM56 20v2c-5.6 0-10.65 2.3-14.28 6h-2.7c4.04-4.89 10.15-8 16.98-8zm-39.03 8h-2.69C10.65 24.3 5.6 22 0 22v-2c6.83 0 12.94 3.11 16.97 8zm15.01-.4a28.09 28.09 0 0 1 2.8-3.86 8 8 0 0 0-13.55 0c1.03 1.2 1.97 2.5 2.79 3.86a4 4 0 0 1 7.96 0zm14.29-11.86c1.3-.48 2.63-.87 4-1.15a25.99 25.99 0 0 0-44.55 0c1.38.28 2.72.67 4.01 1.15a21.98 21.98 0 0 1 36.54 0zm-5.43 2.71c1.13-.72 2.3-1.37 3.54-1.93a19.98 19.98 0 0 0-32.76 0c1.23.56 2.41 1.2 3.54 1.93a15.98 15.98 0 0 1 25.68 0zm-4.67 3.78c.94-.95 1.96-1.83 3.03-2.63a13.98 13.98 0 0 0-22.4 0c1.07.8 2.09 1.68 3.03 2.63a9.99 9.99 0 0 1 16.34 0z'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: auto;
}

/* Persian Date Picker Customization - react-multi-date-picker */
.rmdp-input {
  font-family: 'IRAN Sans X', sans-serif !important;
  direction: rtl;
  text-align: right;
}

.rmdp-calendar {
  font-family: 'IRAN Sans X', sans-serif !important;
  direction: rtl;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15) !important;
  border: 1px solid #e4e4e7 !important;
  border-radius: 12px !important;
  overflow: hidden;
}

.rmdp-header {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;
  border-bottom: 1px solid #e2e8f0 !important;
  padding: 16px !important;
}

.rmdp-header div {
  font-weight: 600 !important;
  color: #1e293b !important;
}

.rmdp-day {
  font-size: 14px !important;
  font-weight: 500 !important;
  transition: all 0.2s ease !important;
  border-radius: 8px !important;
  margin: 2px !important;
}

.rmdp-day:hover {
  background: rgba(0, 112, 240, 0.1) !important;
  transform: scale(1.05);
}

.rmdp-day.rmdp-weekend {
  color: #ef4444 !important;
  font-weight: 600 !important;
}

.rmdp-day.rmdp-selected {
  background: linear-gradient(135deg, #0070f0 0%, #0056b3 100%) !important;
  color: white !important;
  font-weight: 700 !important;
  box-shadow: 0 4px 12px rgba(0, 112, 240, 0.3) !important;
}

.rmdp-day.rmdp-today {
  background: #e6f3ff !important;
  color: #0070f0 !important;
  font-weight: 700 !important;
  border: 2px solid #0070f0 !important;
}

.rmdp-day.rmdp-selected.rmdp-today {
  background: linear-gradient(135deg, #0070f0 0%, #0056b3 100%) !important;
  color: white !important;
  border: 2px solid white !important;
}

.rmdp-week-name {
  background: #f8fafc !important;
  color: #64748b !important;
  font-weight: 600 !important;
  font-size: 12px !important;
  border-bottom: 1px solid #e2e8f0 !important;
}

/* Navigation arrows */
.rmdp-arrow {
  background: rgba(0, 112, 240, 0.1) !important;
  border-radius: 8px !important;
  transition: all 0.2s ease !important;
  color: #0070f0 !important;
}

.rmdp-arrow:hover {
  background: rgba(0, 112, 240, 0.2) !important;
  transform: scale(1.1);
}

/* Onboarding Page Styles */
.onboarding-gradient {
  background: radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
              radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),
              radial-gradient(circle at 40% 80%, rgba(119, 198, 255, 0.1) 0%, transparent 50%);
}

.onboarding-glass {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

.float-animation {
  animation: float 3s ease-in-out infinite;
}

/* Global Font Application */
* {
  font-family: 'IRAN Sans X', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
}

/* Variable Font Weight Utilities */
.font-thin { font-weight: 100; }
.font-extralight { font-weight: 200; }
.font-light { font-weight: 300; }
.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }
.font-extrabold { font-weight: 800; }
.font-black { font-weight: 900; }

/* Custom Font Classes */
.font-iran-sans {
  font-family: 'IRAN Sans X', sans-serif;
}

.font-iran-sans-variable {
  font-family: 'IRAN Sans X', sans-serif;
  font-variation-settings: 'wght' var(--font-weight, 400);
}

/* Text Optimization for Persian */
.text-persian {
  font-family: 'IRAN Sans X', sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Professional Typography Scale - Golden Ratio Based */
/* Base: 16px, Ratio: 1.618 (Golden Ratio) */
.text-display-1 { font-size: 4.236rem; line-height: 1.1; } /* 67.78px */
.text-display-2 { font-size: 3.618rem; line-height: 1.1; } /* 57.89px */
.text-display-3 { font-size: 2.618rem; line-height: 1.15; } /* 41.89px */
.text-h1 { font-size: 2.236rem; line-height: 1.2; } /* 35.78px */
.text-h2 { font-size: 1.618rem; line-height: 1.25; } /* 25.89px */
.text-h3 { font-size: 1.382rem; line-height: 1.3; } /* 22.11px */
.text-h4 { font-size: 1.236rem; line-height: 1.35; } /* 19.78px */
.text-body-large { font-size: 1.125rem; line-height: 1.5; } /* 18px */
.text-body { font-size: 1rem; line-height: 1.6; } /* 16px */
.text-body-small { font-size: 0.889rem; line-height: 1.55; } /* 14.22px */
.text-caption { font-size: 0.764rem; line-height: 1.5; } /* 12.22px */

/* Professional Spacing Scale - Golden Ratio Based */
.space-xs { margin-bottom: 0.618rem; } /* 9.89px */
.space-sm { margin-bottom: 1rem; } /* 16px */
.space-md { margin-bottom: 1.618rem; } /* 25.89px */
.space-lg { margin-bottom: 2.618rem; } /* 41.89px */
.space-xl { margin-bottom: 4.236rem; } /* 67.78px */

/* Typography Combinations for Sections */
.typography-hero {
  font-size: 2.618rem; /* 41.89px */
  line-height: 1.15;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin-bottom: 1.618rem;
}

.typography-subtitle {
  font-size: 1.125rem; /* 18px */
  line-height: 1.5;
  font-weight: 400;
  letter-spacing: 0.005em;
  margin-bottom: 2.618rem;
  color: rgba(0, 0, 0, 0.7);
}

.typography-section-title {
  font-size: 1.382rem; /* 22.11px */
  line-height: 1.3;
  font-weight: 600;
  letter-spacing: -0.01em;
  margin-bottom: 1rem;
}

.typography-feature-text {
  font-size: 0.889rem; /* 14.22px */
  line-height: 1.55;
  font-weight: 500;
  letter-spacing: 0.01em;
}

/* Responsive Typography */
@media (max-width: 640px) {
  .typography-hero {
    font-size: 2.236rem; /* 35.78px */
    line-height: 1.2;
    margin-bottom: 1rem;
  }
  
  .typography-subtitle {
    font-size: 1rem; /* 16px */
    line-height: 1.6;
    margin-bottom: 1.618rem;
  }
  
  .typography-section-title {
    font-size: 1.236rem; /* 19.78px */
    margin-bottom: 0.618rem;
  }
}

/* Golden Ratio Layout Utilities */
.golden-ratio-1 { aspect-ratio: 1.618 / 1; } /* φ:1 */
.golden-ratio-2 { aspect-ratio: 1 / 1.618; } /* 1:φ */
.golden-ratio-square { aspect-ratio: 1 / 1; } /* Perfect square for circles */

/* Golden Ratio Spacing */
.gap-phi { gap: 1.618rem; } /* 25.89px */
.gap-phi-sm { gap: 1rem; } /* 16px - φ inverse */
.gap-phi-xs { gap: 0.618rem; } /* 9.89px - φ inverse squared */

/* Golden Ratio Margin/Padding */
.m-phi { margin: 1.618rem; }
.p-phi { padding: 1.618rem; }
.mt-phi { margin-top: 1.618rem; }
.mb-phi { margin-bottom: 1.618rem; }
.pt-phi { padding-top: 1.618rem; }
.pb-phi { padding-bottom: 1.618rem; }

/* Smaller golden ratio values */
.m-phi-sm { margin: 1rem; }
.p-phi-sm { padding: 1rem; }
.mt-phi-sm { margin-top: 1rem; }
.mb-phi-sm { margin-bottom: 1rem; }